{{!-- Omid Latifi
1199455
 --}}

<canvas id="matrixEffect"></canvas>

<div class="background-container">
    <div class="create-container">
        <form method="post">
            <!-- Add enctype="multipart/form-data" for handling file uploads -->
            <h1 class="create-post">Create a Post</h1>
            <input class="create-input" type="text" id="postTitle" name="postTitle" required>
            <label for="postContent">Post Content:</label>
            <textarea class="create-textarea" id="postContent" name="postContent" rows="6" required></textarea>

            <label for="codingLanguage">Coding Language:</label>
            <select class="create-input" id="codingLanguage" name="codingLanguage" required>
                <option value="" disabled selected>Select a coding language</option>
                <option value="javascript">JavaScript</option>
                <option value="python">Python</option>
                <option value="java">Java</option>
                <option value="csharp">C#</option>
            </select>

            <!-- Section to upload an image -->
            {{!-- <label for="postImage">Upload an Image:</label>
            <input class="create-input" type="file" id="postImage" name="postImage" accept="image/*"> --}}

            <!-- Section to add code -->
            <label for="postCode">Add Code:</label>
            <textarea class="create-textarea" id="postContent" name="postContent" rows="6" required></textarea>

             <input name="username" id="username" type="hidden" value="{{user.username}}" />

            <button class="create-button" type="submit">Submit Post</button>
        </form>
    </div>
</div>



<script src="mode/javascript/javascript.js"></script>

{{!-- Matrix Background INSPIRATION/SOURCE: https://www.youtube.com/watch?v=6Gn2KgKQVHU&ab_channel=QuickCodingTuts --}}
</script>

    <script>
        const canvas = document.getElementById('matrixEffect');
const context = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const katakana = '';
const latin = '';
const nums = '01';
const matrixChars = nums;

const fontSize = 16;
const columns = canvas.width / fontSize;
const drops = Array(Math.floor(columns)).fill(1);

function draw() {
    setTimeout(() => {
        context.fillStyle = 'rgba(240, 240, 240, 0.05)';
        context.fillRect(0, 0, canvas.width, canvas.height);

        context.fillStyle = '#777'; // Gray Text
        context.font = fontSize + 'px monospace';

        for(let i = 0; i < drops.length; i++) {
            const text = matrixChars.charAt(Math.floor(Math.random() * matrixChars.length));
            context.fillText(text, i * fontSize, drops[i] * fontSize);

            if(drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                drops[i] = 0;
            }
            drops[i]++;
        }
        requestAnimationFrame(draw);
    }, 50); // Adjust the frame rate
}

draw();

    </script>
    </script>
      <script src="/darkmode-js/lib/darkmode-js.js"></script>
      <script>
        // Initialize Darkmode.js here
        new Darkmode().showWidget();
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/codemirror.min.css">
    <!-- Include CodeMirror JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/codemirror.min.js"></script>
    <!-- Include CodeMirror JavaScript mode (for syntax highlighting) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.63.0/mode/clike/clike.min.js"></script>

    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("postCode"), {
            lineNumbers: true // Enable line numbers
        });

        // Add event listener to select element
        document.getElementById("codingLanguage").addEventListener("change", function() {
            var mode = this.value;
            if (mode === "javascript") {
                editor.setOption("mode", "javascript");
            } else if (mode === "python") {
                editor.setOption("mode", "python");
            } else if (mode === "java") {
                editor.setOption("mode", "text/x-java");
            } else if (mode === "csharp") {
                editor.setOption("mode", "text/x-csharp");
            }
        });
    </script>
    <script src="https://cdn.tiny.cloud/1/v3ro9xezxc9ll3uq2n1zoisrxutb0xiql2oskjs53ucgptgg/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
        <!-- Initialize TinyMCE -->
  <script>
        tinymce.init({
        selector: ".create-textarea",
        plugins: [
        'advlist autolink lists link image charmap print preview hr anchor pagebreak'
        ],
        menubar: false
        })
</script>